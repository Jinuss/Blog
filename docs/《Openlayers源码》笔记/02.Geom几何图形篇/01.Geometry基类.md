---
title: Geometry基类
date: 2024-12-21 14:10:21
permalink: /pages/f504cc/
categories:
  - 《Openlayers源码》笔记
  - Geom几何图形篇
tags:
  -
author:
  name: 东流
  link: https://github.com/Jinuss
---

## 概述

## 源码分析

```js
class Geometry extends BaseObject {
  constructor() {}
  simplifyTransformed(squaredTolerance, trnasform) {}
  clone() {
    return abstract();
  }
  closestPointXY(x, y, closestPoint, minSquaredDistance) {
    return abstract()
  }
  containXY(x,y){
    const corrd=this.getClosetPoint([x,y]);
    return coord[0] ===x && coord[1] ===y
  }
  getClosestPoint(point,closestPoint){
    closestPoint= closestPoint ? closestPoint:[NaN,NaN];
    this.closestPointXY(point[0],point[1],closestPoint,Infinity)
    return closestPoint;
  }
  intersectscoordinate(coordinate){
    return this.containsXY(coordinate[0],coordinate[1])
  }
  computeExtent(extent){
    return abstract()
  }
  getExtent(extent){
    if(this.extentRevision_!this.getRevision()){
        const extent=this.computeExtent(this.extent_);
        if(isNaN(extent[0])||isNaN(extent[1])){
          createOrUpdateEmpty(extent)
        }
        this.extentRevision_=this.getRevision();
    }
    return returnOrUpdate(this.extent_,extent)
  }
  rotate(angle,anchor){
    abstract()
  }
  scale(xs,xy,anchor){
    abstract()
  }
  simplify(tolerance){
    return this.getSimplifiedGeometry(tolerance * tolerance)
  }
  getSimplifiedGeometry(squaredTolerance){
    return abstract();
  }

  getType(){
    return abstract();
  }

  applyTransform(transformFn){
    abstract()
  }

  intersectsExtent(extent){
    return abstract()
  }

  translate(deltaX,deltaY){
    abstract()
  }

  transform(source,destination){
    const tmpTransform=createTransform()
    const sourceProj=getProjection(source);
    const transformFn= sourceProj.getUnits()=='tile-pixels'
        ?function (inCoordinates,outCoordinates,stride){
            const pixelExtent=sourceProj.getExtent();
            const projectedExtent = sourceProj.getWorldExtent();
            const scale=getHeight(projectedExtent)/getHeight(pixelExtent);
            composeTransform(tmpTransform,projectedExtent[0],projectedExtent[3]),scale,-scale,0,0,0);
            transform2D(inCoordinates,0,inCoordinates.length,stride,tmpTransform,outCoordinates);
            return getTransform(sourceProj,destination)(inCoordinates,outCoordinates,stride)
        }
        : getTransform(sourceProj,destination);
    this.appyTransform(transformFn)

    return this;
  }
}
```

## 总结
